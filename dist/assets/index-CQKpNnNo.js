var Fr=Object.defineProperty;var qr=(e,t,n)=>t in e?Fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $n=(e,t,n)=>qr(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Hr=!1;var Zt=Array.isArray,bn=Array.from,Br=Object.defineProperty,ot=Object.getOwnPropertyDescriptor,Jn=Object.getOwnPropertyDescriptors,Kr=Object.prototype,Gr=Array.prototype,Wt=Object.getPrototypeOf;function zr(e){return typeof e=="function"}const ue=()=>{};function Vr(e){return e()}function Ft(e){for(var t=0;t<e.length;t++)e[t]()}const $e=2,Xn=4,Ct=8,Jt=16,ke=32,Lt=64,Ze=128,qt=256,ae=512,Be=1024,ut=2048,Re=4096,Et=8192,Qn=16384,Nt=32768,Yr=65536,jr=1<<18,er=1<<19,st=Symbol("$state"),Ur=Symbol("");function tr(e){return e===this.v}function wn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function xn(e){return!wn(e,this.v)}function Zr(e){throw new Error("effect_in_teardown")}function Jr(){throw new Error("effect_in_unowned_derived")}function Xr(e){throw new Error("effect_orphan")}function Qr(){throw new Error("effect_update_depth_exceeded")}function ei(e){throw new Error("props_invalid_value")}function ti(){throw new Error("state_descriptors_fixed")}function ni(){throw new Error("state_prototype_fixed")}function ri(){throw new Error("state_unsafe_local_read")}function ii(){throw new Error("state_unsafe_mutation")}function fe(e){return{f:0,v:e,reactions:null,equals:tr,version:0}}function Xt(e,t=!1){var r;const n=fe(e);return t||(n.equals=xn),H!==null&&H.l!==null&&((r=H.l).s??(r.s=[])).push(n),n}function W(e,t=!1){return ai(Xt(e,t))}function ai(e){return $!==null&&$.f&$e&&(Te===null?Ci([e]):Te.push(e)),e}function Ht(e,t){return C(e,U(()=>f(e))),t}function C(e,t){return $!==null&&En()&&$.f&($e|Jt)&&(Te===null||!Te.includes(e))&&ii(),cn(e,t)}function cn(e,t){return e.equals(t)||(e.v=t,e.version=yr(),nr(e,Be),En()&&R!==null&&R.f&ae&&!(R.f&ke)&&(X!==null&&X.includes(e)?(Ae(R,Be),an(R)):He===null?Li([e]):He.push(e))),t}function nr(e,t){var n=e.reactions;if(n!==null)for(var r=En(),i=n.length,a=0;a<i;a++){var s=n[a],l=s.f;l&Be||!r&&s===R||(Ae(s,t),l&(ae|Ze)&&(l&$e?nr(s,ut):an(s)))}}const kn=1,An=2,rr=4,oi=8,si=16,li=1,ci=2,ui=4,di=8,fi=16,vi=1,_i=2,pi=4,gi=1,mi=2,oe=Symbol();let ir=!1;function tt(e,t=null,n){if(typeof e!="object"||e===null||st in e)return e;const r=Wt(e);if(r!==Kr&&r!==Gr)return e;var i=new Map,a=Zt(e),s=fe(0);a&&i.set("length",fe(e.length));var l;return new Proxy(e,{defineProperty(v,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ti();var d=i.get(o);return d===void 0?(d=fe(u.value),i.set(o,d)):C(d,tt(u.value,l)),!0},deleteProperty(v,o){var u=i.get(o);if(u===void 0)o in v&&i.set(o,fe(oe));else{if(a&&typeof o=="string"){var d=i.get("length"),c=Number(o);Number.isInteger(c)&&c<d.v&&C(d,c)}C(u,oe),In(s)}return!0},get(v,o,u){var p;if(o===st)return e;var d=i.get(o),c=o in v;if(d===void 0&&(!c||(p=ot(v,o))!=null&&p.writable)&&(d=fe(tt(c?v[o]:oe,l)),i.set(o,d)),d!==void 0){var m=f(d);return m===oe?void 0:m}return Reflect.get(v,o,u)},getOwnPropertyDescriptor(v,o){var u=Reflect.getOwnPropertyDescriptor(v,o);if(u&&"value"in u){var d=i.get(o);d&&(u.value=f(d))}else if(u===void 0){var c=i.get(o),m=c==null?void 0:c.v;if(c!==void 0&&m!==oe)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return u},has(v,o){var m;if(o===st)return!0;var u=i.get(o),d=u!==void 0&&u.v!==oe||Reflect.has(v,o);if(u!==void 0||R!==null&&(!d||(m=ot(v,o))!=null&&m.writable)){u===void 0&&(u=fe(d?tt(v[o],l):oe),i.set(o,u));var c=f(u);if(c===oe)return!1}return d},set(v,o,u,d){var S;var c=i.get(o),m=o in v;if(a&&o==="length")for(var p=u;p<c.v;p+=1){var g=i.get(p+"");g!==void 0?C(g,oe):p in v&&(g=fe(oe),i.set(p+"",g))}c===void 0?(!m||(S=ot(v,o))!=null&&S.writable)&&(c=fe(void 0),C(c,tt(u,l)),i.set(o,c)):(m=c.v!==oe,C(c,tt(u,l)));var b=Reflect.getOwnPropertyDescriptor(v,o);if(b!=null&&b.set&&b.set.call(d,u),!m){if(a&&typeof o=="string"){var k=i.get("length"),x=Number(o);Number.isInteger(x)&&x>=k.v&&C(k,x+1)}In(s)}return!0},ownKeys(v){f(s);var o=Reflect.ownKeys(v).filter(c=>{var m=i.get(c);return m===void 0||m.v!==oe});for(var[u,d]of i)d.v!==oe&&!(u in v)&&o.push(u);return o},setPrototypeOf(){ni()}})}function In(e,t=1){C(e,e.v+t)}var Dn,ar,or;function hi(){if(Dn===void 0){Dn=window;var e=Element.prototype,t=Node.prototype;ar=ot(t,"firstChild").get,or=ot(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Qt(e=""){return document.createTextNode(e)}function Bt(e){return ar.call(e)}function en(e){return or.call(e)}function h(e,t){return Bt(e)}function Ke(e,t){{var n=Bt(e);return n instanceof Comment&&n.data===""?en(n):n}}function E(e,t=1,n=!1){let r=e;for(;t--;)r=en(r);return r}function yi(e){e.textContent=""}function Kt(e){var t=$e|Be;R===null?t|=Ze:R.f|=er;const n={children:null,ctx:H,deps:null,equals:tr,f:t,fn:e,reactions:null,v:null,version:0,parent:R};if($!==null&&$.f&$e){var r=$;(r.children??(r.children=[])).push(n)}return n}function se(e){const t=Kt(e);return t.equals=xn,t}function sr(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var r=t[n];r.f&$e?Sn(r):Je(r)}}}function lr(e){var t,n=R;pe(e.parent);try{sr(e),t=br(e)}finally{pe(n)}return t}function cr(e){var t=lr(e),n=(rt||e.f&Ze)&&e.deps!==null?ut:ae;Ae(e,n),e.equals(t)||(e.v=t,e.version=yr())}function Sn(e){sr(e),wt(e,0),Ae(e,Et),e.v=e.children=e.deps=e.ctx=e.reactions=null}function ur(e){R===null&&$===null&&Xr(),$!==null&&$.f&Ze&&Jr(),Ln&&Zr()}function bi(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function dt(e,t,n,r=!0){var i=(e&Lt)!==0,a=R,s={ctx:H,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|Be,first:null,fn:t,last:null,next:null,parent:i?null:a,prev:null,teardown:null,transitions:null,version:0};if(n){var l=lt;try{Wn(!0),Tt(s),s.f|=Qn}catch(u){throw Je(s),u}finally{Wn(l)}}else t!==null&&an(s);var v=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&er)===0;if(!v&&!i&&r&&(a!==null&&bi(s,a),$!==null&&$.f&$e)){var o=$;(o.children??(o.children=[])).push(s)}return s}function dr(e){const t=dt(Ct,null,!1);return Ae(t,ae),t.teardown=e,t}function un(e){ur();var t=R!==null&&(R.f&ke)!==0&&H!==null&&!H.m;if(t){var n=H;(n.e??(n.e=[])).push({fn:e,effect:R,reaction:$})}else{var r=tn(e);return r}}function wi(e){return ur(),nn(e)}function xi(e){const t=dt(Lt,e,!0);return()=>{Je(t)}}function tn(e){return dt(Xn,e,!1)}function Y(e,t){var n=H,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=nn(()=>{e(),!r.ran&&(r.ran=!0,C(n.l.r2,!0),U(t))})}function Ge(){var e=H;nn(()=>{if(f(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&ae&&Ae(n,ut),ft(n)&&Tt(n),t.ran=!1}e.l.r2.v=!1}})}function nn(e){return dt(Ct,e,!0)}function q(e){return Rt(e)}function Rt(e,t=0){return dt(Ct|Jt|t,e,!0)}function je(e,t=!0){return dt(Ct|ke,e,!0,t)}function fr(e){var t=e.teardown;if(t!==null){const n=Ln,r=$;Fn(!0),Me(null);try{t.call(null)}finally{Fn(n),Me(r)}}}function vr(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)Sn(t[n])}}function _r(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;Je(n,t),n=r}}function ki(e){for(var t=e.first;t!==null;){var n=t.next;t.f&ke||Je(t),t=n}}function Je(e,t=!0){var n=!1;if((t||e.f&jr)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var a=r===i?null:en(r);r.remove(),r=a}n=!0}_r(e,t&&!n),vr(e),wt(e,0),Ae(e,Et);var s=e.transitions;if(s!==null)for(const v of s)v.stop();fr(e);var l=e.parent;l!==null&&l.first!==null&&pr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function pr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function bt(e,t){var n=[];Cn(e,n,!0),gr(n,()=>{Je(e),t&&t()})}function gr(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Cn(e,t,n){if(!(e.f&Re)){if(e.f^=Re,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,a=(r.f&Nt)!==0||(r.f&ke)!==0;Cn(r,t,a?n:!1),r=i}}}function Gt(e){mr(e,!0)}function mr(e,t){if(e.f&Re){ft(e)&&Tt(e),e.f^=Re;for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Nt)!==0||(n.f&ke)!==0;mr(n,i?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let dn=!1,fn=[];function Ai(){dn=!1;const e=fn.slice();fn=[],Ft(e)}function rn(e){dn||(dn=!0,queueMicrotask(Ai)),fn.push(e)}function Si(e){throw new Error("lifecycle_outside_component")}let zt=!1,lt=!1,Ln=!1;function Wn(e){lt=e}function Fn(e){Ln=e}let vn=[],ht=0;let $=null;function Me(e){$=e}let R=null;function pe(e){R=e}let Te=null;function Ci(e){Te=e}let X=null,ce=0,He=null;function Li(e){He=e}let hr=0,rt=!1,H=null;function yr(){return++hr}function En(){return H!==null&&H.l===null}function ft(e){var s,l;var t=e.f;if(t&Be)return!0;if(t&ut){var n=e.deps,r=(t&Ze)!==0;if(n!==null){var i;if(t&qt){for(i=0;i<n.length;i++)((s=n[i]).reactions??(s.reactions=[])).push(e);e.f^=qt}for(i=0;i<n.length;i++){var a=n[i];if(ft(a)&&cr(a),r&&R!==null&&!rt&&!((l=a==null?void 0:a.reactions)!=null&&l.includes(e))&&(a.reactions??(a.reactions=[])).push(e),a.version>e.version)return!0}}r||Ae(e,ae)}return!1}function Ei(e,t,n){throw e}function br(e){var c;var t=X,n=ce,r=He,i=$,a=rt,s=Te,l=H,v=e.f;X=null,ce=0,He=null,$=v&(ke|Lt)?null:e,rt=!lt&&(v&Ze)!==0,Te=null,H=e.ctx;try{var o=(0,e.fn)(),u=e.deps;if(X!==null){var d;if(wt(e,ce),u!==null&&ce>0)for(u.length=ce+X.length,d=0;d<X.length;d++)u[ce+d]=X[d];else e.deps=u=X;if(!rt)for(d=ce;d<u.length;d++)((c=u[d]).reactions??(c.reactions=[])).push(e)}else u!==null&&ce<u.length&&(wt(e,ce),u.length=ce);return o}finally{X=t,ce=n,He=r,$=i,rt=a,Te=s,H=l}}function Ni(e,t){let n=t.reactions;if(n!==null){var r=n.indexOf(e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&t.f&$e&&(X===null||!X.includes(t))&&(Ae(t,ut),t.f&(Ze|qt)||(t.f^=qt),wt(t,0))}function wt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Ni(e,n[r])}function Tt(e){var t=e.f;if(!(t&Et)){Ae(e,ae);var n=R;R=e;try{t&Jt?ki(e):_r(e),vr(e),fr(e);var r=br(e);e.teardown=typeof r=="function"?r:null,e.version=hr}catch(i){Ei(i)}finally{R=n}}}function Ri(){ht>1e3&&(ht=0,Qr()),ht++}function Ti(e){var t=e.length;if(t!==0){Ri();var n=lt;lt=!0;try{for(var r=0;r<t;r++){var i=e[r];i.f&ae||(i.f^=ae);var a=[];wr(i,a),Mi(a)}}finally{lt=n}}}function Mi(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];!(r.f&(Et|Re))&&ft(r)&&(Tt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?pr(r):r.fn=null))}}function Oi(){if(zt=!1,ht>1001)return;const e=vn;vn=[],Ti(e),zt||(ht=0)}function an(e){zt||(zt=!0,queueMicrotask(Oi));for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Lt|ke)){if(!(n&ae))return;t.f^=ae}}vn.push(t)}function wr(e,t){var n=e.first,r=[];e:for(;n!==null;){var i=n.f,a=(i&ke)!==0,s=a&&(i&ae)!==0;if(!s&&!(i&Re))if(i&Ct){a?n.f^=ae:ft(n)&&Tt(n);var l=n.first;if(l!==null){n=l;continue}}else i&Xn&&r.push(n);var v=n.next;if(v===null){let d=n.parent;for(;d!==null;){if(e===d)break e;var o=d.next;if(o!==null){n=o;continue e}d=d.parent}}n=v}for(var u=0;u<r.length;u++)l=r[u],t.push(l),wr(l,t)}function f(e){var l;var t=e.f,n=(t&$e)!==0;if(n&&t&Et){var r=lr(e);return Sn(e),r}if($!==null){Te!==null&&Te.includes(e)&&ri();var i=$.deps;X===null&&i!==null&&i[ce]===e?ce++:X===null?X=[e]:X.push(e),He!==null&&R!==null&&R.f&ae&&!(R.f&ke)&&He.includes(e)&&(Ae(R,Be),an(R))}else if(n&&e.deps===null){var a=e,s=a.parent;s!==null&&!((l=s.deriveds)!=null&&l.includes(a))&&(s.deriveds??(s.deriveds=[])).push(a)}return n&&(a=e,ft(a)&&cr(a)),e.v}function U(e){const t=$;try{return $=null,e()}finally{$=t}}const Pi=~(Be|ut|ae);function Ae(e,t){e.f=e.f&Pi|t}function Se(e,t=!1,n){H={p:H,c:null,e:null,m:!1,s:e,x:null,l:null},t||(H.l={s:null,u:null,r1:[],r2:fe(!1)})}function Ce(e){const t=H;if(t!==null){const s=t.e;if(s!==null){var n=R,r=$;t.e=null;try{for(var i=0;i<s.length;i++){var a=s[i];pe(a.effect),Me(a.reaction),tn(a.fn)}}finally{pe(n),Me(r)}}H=t.p,t.m=!0}return{}}function ve(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(st in e)_n(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&st in n&&_n(n)}}}function _n(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{_n(e[r],t)}catch{}const n=Wt(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Jn(n);for(let i in r){const a=r[i].get;if(a)try{a.call(e)}catch{}}}}}const $i=new Set,qn=new Set;function Ii(e,t,n,r){function i(a){if(r.capture||gt.call(t,a),!a.cancelBubble){var s=$,l=R;Me(null),pe(null);try{return n.call(this,a)}finally{Me(s),pe(l)}}}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?rn(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function ct(e,t,n,r,i){var a={capture:r,passive:i},s=Ii(e,t,n,a);(t===document.body||t===window||t===document)&&dr(()=>{t.removeEventListener(e,s,a)})}function gt(e){var x;var t=this,n=t.ownerDocument,r=e.type,i=((x=e.composedPath)==null?void 0:x.call(e))||[],a=i[0]||e.target,s=0,l=e.__root;if(l){var v=i.indexOf(l);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var o=i.indexOf(t);if(o===-1)return;v<=o&&(s=v)}if(a=i[s]||e.target,a!==t){Br(e,"currentTarget",{configurable:!0,get(){return a||n}});var u=$,d=R;Me(null),pe(null);try{for(var c,m=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+r];if(g!==void 0&&!a.disabled)if(Zt(g)){var[b,...k]=g;b.apply(a,[e,...k])}else g.call(a,e)}catch(S){c?m.push(S):c=S}if(e.cancelBubble||p===t||p===null)break;a=p}if(c){for(let S of m)queueMicrotask(()=>{throw S});throw c}}finally{e.__root=t,delete e.currentTarget,Me(u),pe(d)}}}function Di(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Vt(e,t){var n=R;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function K(e,t){var n=(t&gi)!==0,r=(t&mi)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=Di(a?e:"<!>"+e),n||(i=Bt(i)));var s=r?document.importNode(i,!0):i.cloneNode(!0);if(n){var l=Bt(s),v=s.lastChild;Vt(l,v)}else Vt(s,s);return s}}function nt(e=""){{var t=Qt(e+"");return Vt(t,t),t}}function xt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Qt();return e.append(t,n),Vt(t,n),e}function T(e,t){e!==null&&e.before(t)}const Wi=["touchstart","touchmove"];function Fi(e){return Wi.includes(e)}let pn=!0;function V(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function qi(e,t){return Hi(e,t)}const Qe=new Map;function Hi(e,{target:t,anchor:n,props:r={},events:i,context:a,intro:s=!0}){hi();var l=new Set,v=d=>{for(var c=0;c<d.length;c++){var m=d[c];if(!l.has(m)){l.add(m);var p=Fi(m);t.addEventListener(m,gt,{passive:p});var g=Qe.get(m);g===void 0?(document.addEventListener(m,gt,{passive:p}),Qe.set(m,1)):Qe.set(m,g+1)}}};v(bn($i)),qn.add(v);var o=void 0,u=xi(()=>{var d=n??t.appendChild(Qt());return je(()=>{if(a){Se({});var c=H;c.c=a}i&&(r.$$events=i),pn=s,o=e(d,r)||{},pn=!0,a&&Ce()}),()=>{var p;for(var c of l){t.removeEventListener(c,gt);var m=Qe.get(c);--m===0?(document.removeEventListener(c,gt),Qe.delete(c)):Qe.set(c,m)}qn.delete(v),Hn.delete(o),d!==n&&((p=d.parentNode)==null||p.removeChild(d))}});return Hn.set(o,u),o}let Hn=new WeakMap;function xe(e,t,n,r=null,i=!1){var a=e,s=null,l=null,v=null,o=i?Nt:0;Rt(()=>{v!==(v=!!t())&&(v?(s?Gt(s):s=je(()=>n(a)),l&&bt(l,()=>{l=null})):(l?Gt(l):r&&(l=je(()=>r(a))),s&&bt(s,()=>{s=null})))},o)}function xr(e,t,n){var r=e,i=oe,a;Rt(()=>{wn(i,i=t())&&(a&&bt(a),a=je(()=>n(r)))})}let ln=null;function kt(e,t){return t}function Bi(e,t,n,r){for(var i=[],a=t.length,s=0;s<a;s++)Cn(t[s].e,i,!0);var l=a>0&&i.length===0&&n!==null;if(l){var v=n.parentNode;yi(v),v.append(n),r.clear(),Fe(e,t[0].prev,t[a-1].next)}gr(i,()=>{for(var o=0;o<a;o++){var u=t[o];l||(r.delete(u.k),Fe(e,u.prev,u.next)),Je(u.e,!l)}})}function Ue(e,t,n,r,i,a=null){var s=e,l={flags:t,items:new Map,first:null},v=(t&rr)!==0;if(v){var o=e;s=o.appendChild(Qt())}var u=null,d=!1;Rt(()=>{var c=n(),m=Zt(c)?c:c==null?[]:bn(c),p=m.length;if(!(d&&p===0)){d=p===0;{var g=$;Ki(m,l,s,i,t,(g.f&Re)!==0,r)}a!==null&&(p===0?u?Gt(u):u=je(()=>a(s)):u!==null&&bt(u,()=>{u=null})),n()}})}function Ki(e,t,n,r,i,a,s){var J,ge,me,he;var l=(i&oi)!==0,v=(i&(kn|An))!==0,o=e.length,u=t.items,d=t.first,c=d,m,p=null,g,b=[],k=[],x,S,w,y;if(l)for(y=0;y<o;y+=1)x=e[y],S=s(x,y),w=u.get(S),w!==void 0&&((J=w.a)==null||J.measure(),(g??(g=new Set)).add(w));for(y=0;y<o;y+=1){if(x=e[y],S=s(x,y),w=u.get(S),w===void 0){var P=c?c.e.nodes_start:n;p=zi(P,t,p,p===null?t.first:p.next,x,S,y,r,i),u.set(S,p),b=[],k=[],c=p.next;continue}if(v&&Gi(w,x,y,i),w.e.f&Re&&(Gt(w.e),l&&((ge=w.a)==null||ge.unfix(),(g??(g=new Set)).delete(w))),w!==c){if(m!==void 0&&m.has(w)){if(b.length<k.length){var L=k[0],N;p=L.prev;var M=b[0],D=b[b.length-1];for(N=0;N<b.length;N+=1)Bn(b[N],L,n);for(N=0;N<k.length;N+=1)m.delete(k[N]);Fe(t,M.prev,D.next),Fe(t,p,M),Fe(t,D,L),c=L,p=D,y-=1,b=[],k=[]}else m.delete(w),Bn(w,c,n),Fe(t,w.prev,w.next),Fe(t,w,p===null?t.first:p.next),Fe(t,p,w),p=w;continue}for(b=[],k=[];c!==null&&c.k!==S;)(a||!(c.e.f&Re))&&(m??(m=new Set)).add(c),k.push(c),c=c.next;if(c===null)continue;w=c}b.push(w),p=w,c=w.next}if(c!==null||m!==void 0){for(var F=m===void 0?[]:bn(m);c!==null;)(a||!(c.e.f&Re))&&F.push(c),c=c.next;var B=F.length;if(B>0){var j=i&rr&&o===0?n:null;if(l){for(y=0;y<B;y+=1)(me=F[y].a)==null||me.measure();for(y=0;y<B;y+=1)(he=F[y].a)==null||he.fix()}Bi(t,F,j,u)}}l&&rn(()=>{var le;if(g!==void 0)for(w of g)(le=w.a)==null||le.apply()}),R.first=t.first&&t.first.e,R.last=p&&p.e}function Gi(e,t,n,r){r&kn&&cn(e.v,t),r&An?cn(e.i,n):e.i=n}function zi(e,t,n,r,i,a,s,l,v){var o=ln;try{var u=(v&kn)!==0,d=(v&si)===0,c=u?d?Xt(i):fe(i):i,m=v&An?fe(s):s,p={i:m,v:c,k:a,a:null,e:null,prev:n,next:r};return ln=p,p.e=je(()=>l(e,c,m),ir),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{ln=o}}function Bn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==r;){var s=en(a);i.before(a),a=s}}function Fe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Vi(e,t,n,r,i){var l;var a=(l=t.$$slots)==null?void 0:l[n],s=!1;a===!0&&(a=t.children,s=!0),a===void 0||a(e,s?()=>r:r)}function Yi(e,t,n){var r=e,i,a;Rt(()=>{i!==(i=t())&&(a&&(bt(a),a=null),i&&(a=je(()=>n(r,i))))},Nt)}function kr(e,t,n,r){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Ur]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ji(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var Kn=new Map;function ji(e){var t=Kn.get(e.nodeName);if(t)return t;Kn.set(e.nodeName,t=[]);for(var n,r=Wt(e),i=Element.prototype;i!==r;){n=Jn(r);for(var a in n)n[a].set&&t.push(a);r=Wt(r)}return t}function on(e,t){var n=e.__className,r=Ui(t);(n!==r||ir)&&(t==null?e.removeAttribute("class"):e.className=r,e.__className=r)}function Ui(e){return e??""}function it(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}const Zi=()=>performance.now(),qe={tick:e=>requestAnimationFrame(e),now:()=>Zi(),tasks:new Set};function Ar(e){qe.tasks.forEach(t=>{t.c(e)||(qe.tasks.delete(t),t.f())}),qe.tasks.size!==0&&qe.tick(Ar)}function Ji(e){let t;return qe.tasks.size===0&&qe.tick(Ar),{promise:new Promise(n=>{qe.tasks.add(t={c:e,f:n})}),abort(){qe.tasks.delete(t)}}}function Pt(e,t){e.dispatchEvent(new CustomEvent(t))}function Xi(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Gn(e){const t={},n=e.split(";");for(const r of n){const[i,a]=r.split(":");if(!i||a===void 0)break;const s=Xi(i.trim());t[s]=a.trim()}return t}const Qi=e=>e;function Yt(e,t,n,r){var i=(e&vi)!==0,a=(e&_i)!==0,s=i&&a,l=(e&pi)!==0,v=s?"both":i?"in":"out",o,u=t.inert,d,c;function m(){var x=$,S=R;Me(null),pe(null);try{return o??(o=n()(t,(r==null?void 0:r())??{},{direction:v}))}finally{Me(x),pe(S)}}var p={is_global:l,in(){var x;if(t.inert=u,!i){c==null||c.abort(),(x=c==null?void 0:c.reset)==null||x.call(c);return}a||d==null||d.abort(),Pt(t,"introstart"),d=gn(t,m(),c,1,()=>{Pt(t,"introend"),d==null||d.abort(),d=o=void 0})},out(x){if(!a){x==null||x(),o=void 0;return}t.inert=!0,Pt(t,"outrostart"),c=gn(t,m(),d,0,()=>{Pt(t,"outroend"),x==null||x()})},stop:()=>{d==null||d.abort(),c==null||c.abort()}},g=R;if((g.transitions??(g.transitions=[])).push(p),i&&pn){var b=l;if(!b){for(var k=g.parent;k&&k.f&Nt;)for(;(k=k.parent)&&!(k.f&Jt););b=!k||(k.f&Qn)!==0}b&&tn(()=>{U(()=>p.in())})}}function gn(e,t,n,r,i){var a=r===1;if(zr(t)){var s,l=!1;return rn(()=>{if(!l){var b=t({direction:a?"in":"out"});s=gn(e,b,n,r,i)}}),{abort:()=>{l=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return i(),{abort:ue,deactivate:ue,reset:ue,t:()=>r};const{delay:v=0,css:o,tick:u,easing:d=Qi}=t;var c=[];if(a&&n===void 0&&(u&&u(0,1),o)){var m=Gn(o(0,1));c.push(m,m)}var p=()=>1-r,g=e.animate(c,{duration:v});return g.onfinish=()=>{var b=(n==null?void 0:n.t())??1-r;n==null||n.abort();var k=r-b,x=t.duration*Math.abs(k),S=[];if(x>0){if(o)for(var w=Math.ceil(x/16.666666666666668),y=0;y<=w;y+=1){var P=b+k*d(y/w),L=o(P,1-P);S.push(Gn(L))}p=()=>{var N=g.currentTime;return b+k*d(N/x)},u&&Ji(()=>{if(g.playState!=="running")return!1;var N=p();return u(N,1-N),!0})}g=e.animate(S,{duration:x,fill:"forwards"}),g.onfinish=()=>{p=()=>r,u==null||u(r,1-r),i()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=ue)},deactivate:()=>{i=ue},reset:()=>{r===0&&(u==null||u(1,0))},t:()=>p()}}function zn(e,t){return e===t||(e==null?void 0:e[st])===t}function mn(e={},t,n,r){return tn(()=>{var i,a;return nn(()=>{i=a,a=[],U(()=>{e!==n(...a)&&(t(e,...a),i&&zn(n(...i),e)&&t(null,...i))})}),()=>{rn(()=>{a&&zn(n(...a),e)&&t(null,...a)})}}),e}function Oe(e=!1){const t=H,n=t.l.u;if(!n)return;let r=()=>ve(t.s);if(e){let i=0,a={};const s=Kt(()=>{let l=!1;const v=t.s;for(const o in v)v[o]!==a[o]&&(a[o]=v[o],l=!0);return l&&i++,i});r=()=>f(s)}n.b.length&&wi(()=>{Vn(t,r),Ft(n.b)}),un(()=>{const i=U(()=>n.m.map(Vr));return()=>{for(const a of i)typeof a=="function"&&a()}}),n.a.length&&un(()=>{Vn(t,r),Ft(n.a)})}function Vn(e,t){if(e.l.s)for(const n of e.l.s)f(n);t()}function Sr(e,t){var a;var n=(a=e.$$events)==null?void 0:a[t.type],r=Zt(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function Nn(e,t,n){if(e==null)return t(void 0),n&&n(void 0),ue;const r=U(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}let $t=!1;function ie(e,t,n){const r=n[t]??(n[t]={store:null,source:Xt(void 0),unsubscribe:ue});if(r.store!==e)if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=ue;else{var i=!0;r.unsubscribe=Nn(e,a=>{i?r.source.v=a:C(r.source,a)}),i=!1}return f(r.source)}function ea(e,t){return e.set(t),t}function vt(){const e={};return dr(()=>{for(var t in e)e[t].unsubscribe()}),e}function yt(e,t,n){return e.set(n),t}function ta(e){var t=$t;try{return $t=!1,[e(),$t]}finally{$t=t}}function Yn(e){for(var t=R,n=R;t!==null&&!(t.f&(ke|Lt));)t=t.parent;try{return pe(t),e()}finally{pe(n)}}function Q(e,t,n,r){var P;var i=(n&li)!==0,a=(n&ci)!==0,s=(n&di)!==0,l=(n&fi)!==0,v=!1,o;s?[o,v]=ta(()=>e[t]):o=e[t];var u=(P=ot(e,t))==null?void 0:P.set,d=r,c=!0,m=!1,p=()=>(m=!0,c&&(c=!1,l?d=U(r):d=r),d);o===void 0&&r!==void 0&&(u&&a&&ei(),o=p(),u&&u(o));var g;if(a)g=()=>{var L=e[t];return L===void 0?p():(c=!0,m=!1,L)};else{var b=Yn(()=>(i?Kt:se)(()=>e[t]));b.f|=Yr,g=()=>{var L=f(b);return L!==void 0&&(d=void 0),L===void 0?d:L}}if(!(n&ui))return g;if(u){var k=e.$$legacy;return function(L,N){return arguments.length>0?((!a||!N||k||v)&&u(N?g():L),L):g()}}var x=!1,S=!1,w=Xt(o),y=Yn(()=>Kt(()=>{var L=g(),N=f(w);return x?(x=!1,S=!0,N):(S=!1,w.v=L)}));return i||(y.equals=xn),function(L,N){if(arguments.length>0){const M=N?f(y):a&&s?tt(L):L;return y.equals(M)||(x=!0,C(w,M),m&&d!==void 0&&(d=M),U(()=>f(y))),L}return f(y)}}function na(e){H===null&&Si(),H.l!==null?ra(H).m.push(e):un(()=>{const t=U(e);if(typeof t=="function")return t})}function ra(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ia="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ia);function aa(e,t){Se(t,!1);let n=Q(t,"routingSettings",24,()=>({})),r=Q(t,"currentRoute",8,null);Oe();var i=xt(),a=Ke(i);xe(a,r,s=>{var l=xt(),v=Ke(l);Yi(v,()=>n()[r()],(o,u)=>{u(o,{})}),T(s,l)}),T(e,i),Ce()}const Ye={narcadia641_zenny:{name:"Zenny",description:"A single coin",consumable:!1,consumeRequirement:[],onConsume:[]},small_battery:{name:"Small battery",description:"Restores 1 energy",consumable:!0,consumeRequirement:e=>e.data.run.currentEnergy<e.data.run.maxEnergy-1,onConsume:e=>(e.data.run.currentEnergy=Math.min(e.data.run.currentEnergy+1,e.data.run.maxEnergy),e)},naws_museum_ticket:{name:"NAWS History Museum ticket",description:"One admission",consumable:!1,consumeRequirement:[],onConsume:[]}};var oa=K('<div class="wrapper svelte-16aha61"><canvas class="svelte-16aha61"></canvas></div>');function At(e,t){Se(t,!1);let n=Q(t,"percent",8,0),r=Q(t,"rgb",24,()=>[148,163,184]);const i=3,a=2,s=i*a;let l=W(),v=W(),o=W(0),u=0,d=0,c,m=[],p;na(()=>(p=new ResizeObserver(w=>{for(const y of w)C(o,y.contentRect.width),g(),k()}),f(v)&&p.observe(f(v)),()=>{p.disconnect(),cancelAnimationFrame(c)}));function g(){u=Math.floor(f(o)/i)*a;const y=Math.floor(n()/100*u);y>d?(d=y,b()):y<d&&(d=y,m=m.slice(0,d),k())}function b(){m.length=d;for(let y=0;y<d;(y+=1)-1)m[y]===void 0&&(m[y]=0);function w(){let y=!1;for(let P=0;P<d;(P+=1)-1)m[P]<1&&(m[P]+=.05,m[P]>1&&(m[P]=1),y=!0);y&&(k(),c=requestAnimationFrame(w))}c=requestAnimationFrame(w)}function k(){if(!f(l)||!f(o))return;Ht(l,f(l).width=f(o)),Ht(l,f(l).height=s);const w=f(l).getContext("2d");if(w){if(n()>=100){w.fillStyle=`rgba(${r().join(",")}, 1.0)`,w.fillRect(0,0,f(l).width,s);return}w.clearRect(0,0,f(l).width,f(l).height);for(let y=0;y<d;(y+=1)-1){const P=Math.floor(y/a),L=y%a,N=P*i,M=L*i,D=m[y]??0;w.fillStyle=`rgba(${r().join(",")}, ${D.toFixed(2)})`,w.fillRect(N,M,i,i)}}}Y(()=>ve(n()),()=>{n()&&g()}),Y(()=>f(o),()=>{f(o)&&g()}),Ge(),Oe();var x=oa(),S=h(x);mn(S,w=>C(l,w),()=>f(l)),mn(x,w=>C(v,w),()=>f(v)),T(e,x),Ce()}const et=[];function sa(e,t){return{subscribe:Le(e,t).subscribe}}function Le(e,t=ue){let n=null;const r=new Set;function i(l){if(wn(e,l)&&(e=l,n)){const v=!et.length;for(const o of r)o[1](),et.push(o,e);if(v){for(let o=0;o<et.length;o+=2)et[o][0](et[o+1]);et.length=0}}}function a(l){i(l(e))}function s(l,v=ue){const o=[l,v];return r.add(o),r.size===1&&(n=t(i,a)||ue),l(e),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:s}}function Rn(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return sa(n,(s,l)=>{let v=!1;const o=[];let u=0,d=ue;const c=()=>{if(u)return;d();const p=t(r?o[0]:o,s,l);a?s(p):d=typeof p=="function"?p:ue},m=i.map((p,g)=>Nn(p,b=>{o[g]=b,u&=~(1<<g),v&&c()},()=>{u|=1<<g}));return v=!0,c(),function(){Ft(m),d(),v=!1}})}function _e(e){let t;return Nn(e,n=>t=n)(),t}const la={new_arcadia_town_name:"New Arcadia",new_arcadia_year:"641",narcadia_currency:"Zenny",narcadia_founding:"",narcadia_resources:"",marco_needs_charger:"",narcadia_west_main_street_acchikocchi:"west main street layout"};function Cr(...e){const t=n=>n&&typeof n=="object";return e.reduce((n,r)=>(Object.keys(r).forEach(i=>{const a=n[i],s=r[i];Array.isArray(a)&&Array.isArray(s)?n[i]=a.concat(...s):t(a)&&t(s)?n[i]=Cr(a,s):n[i]=s}),n),{})}const It=e=>t=>(t.data.run.logEntries.push({ts:t.data.run.timeSpent,text:e}),t),re={skillCheck:(e,t)=>({revealCondition:[n=>{var r;return n.data.run.bakery||Pn(),(((r=n.data.run.bakery)==null?void 0:r.modifiers.total[e])??0)>=t}],revealConditionExplained:[`Requires x${t} on ${e}`]}),hasKnowledge:e=>({revealCondition:[t=>t.data.global.knowledge.includes(e)],revealConditionExplained:[`Requires knowledge about ${la[e]}`]}),itemNotCappedYet:e=>({revealCondition:[t=>{var n;return(((n=t.data.run.inventory[e])==null?void 0:n.amount)??0)<t.data.run.inventoryCapacity}],revealConditionExplained:[`Inventory is full for ${Ye[e].name}`]}),item:(e,t)=>({revealCondition:[n=>{var r;return(((r=n.data.run.inventory[e])==null?void 0:r.amount)??0)>=t}],revealConditionExplained:[`Requires ${t} of ${Ye[e].name}`]}),all:e=>{let t=e.map(r=>r.revealCondition).flat(),n=e.map(r=>r.revealConditionExplained).flat();return{revealCondition:t,revealConditionExplained:n}}},_={or:e=>t=>e.some(n=>n(t)),skillModifier:(e,t)=>n=>{var r;return n.data.run.bakery||Pn(),(((r=n.data.run.bakery)==null?void 0:r.modifiers.total[e])??0)>=t},inLocation:e=>{let t=Array.isArray(e)?e:[e];return n=>t.includes(n.data.run.location)},inSubLocation:e=>t=>t.data.run.subLocation===e,hasKnowledge:e=>t=>t.data.global.knowledge.includes(e),not:e=>{let t=Array.isArray(e)?e:[e];return n=>t.every(r=>!r(n))},ifActionCompleteRun:e=>t=>(e=Array.isArray(e)?e:[e],e.every(n=>t.data.run.actionProgress[n]&&t.data.run.actionProgress[n].complete)),ifActionCompleteAny:e=>t=>(e=Array.isArray(e)?e:[e],e.every(n=>t.data.run.actionProgress[n]&&t.data.run.actionProgress[n].complete||t.data.global.presistentActionProgress.includes(n))),ifActionCompleteGlobal:e=>t=>(e=Array.isArray(e)?e:[e],e.every(n=>t.data.global.presistentActionProgress.includes(n)&&(!t.data.run.actionProgress[n]||!t.data.run.actionProgress[n].complete)))},A={addLog:e=>t=>(t.data.run.logEntries.push({ts:t.data.run.timeSpent,text:e}),t),addFlag:(e,t=null)=>n=>(n.data.run.flags[e]=t,n),addItem(e,t){return n=>(n.data.run.inventory[e]||(n.data.run.inventory[e]={amount:0,cooldown:0}),n.data.run.inventory[e].amount<n.data.run.inventoryCapacity&&(n.data.run.inventory[e].amount+=Math.min(t,n.data.run.inventoryCapacity-n.data.run.inventory[e].amount),n.data.run.inventory[e].amount>=n.data.run.inventoryCapacity&&(n.data.run.action=null)),n)},removeItem:(e,t)=>n=>(n.data.run.inventory[e]&&(n.data.run.inventory[e].amount-=t),n),moveSubLocation:e=>t=>(t.data.run.subLocation=e,wa(),t),addKnowledge:e=>t=>(t.data.global.knowledge.includes(e)||(t.data.global.knowledge.push(e),ba()),t)},ca={"New Arcadia 641":e=>{let t=null;return e.data.global.knowledge.includes("new_arcadia_town_name")&&(t="New Arcadia"),e.data.global.knowledge.includes("new_arcadia_year")&&(t?t+=" 641":t="641"),t&&(t+=" — "+e.data.run.subLocation),{text:t,show:t!=null}}};function hn(e){const t=Math.floor(e/1e3),n=String(Math.floor(t/3600)).padStart(2,"0"),r=String(Math.floor(t%3600/60)).padStart(2,"0"),i=String(t%60).padStart(2,"0");return`${n}:${r}:${i}`}function jn(e,t){let n=1,r=t,i=0;for(;e>=r;)e-=r,i+=r,n++,r=Math.floor(r*1.2);return{level:n,expToNext:r,expToCurrent:i}}function Un(e,t){const n=Math.pow(t,e-1);return Math.round(n*1e4)/1e4}const ua=e=>Ee(e);function Ee(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>Ee(n));const t={};for(const n in e)Object.hasOwn(e,n)&&(t[n]=Ee(e[n]));return t}const jt={retraceIdx:0,maxEnergy:10,energyDecayRate:.05,action:null,actionProgress:{},flags:{},mainViewRoute:"actions",timeSpent:0,currentEnergy:10,location:"New Arcadia 641",inventory:{},inventoryCapacity:10,subLocation:"Western main street alley",stats:{exploration:0,perception:0,social:0,engineering:0},logEntries:[{ts:0,text:"After series of weird zaps, your time leap machine seemingly started to work. Then the second series of zaps came in"},{ts:0,text:"You find yourself transported to some backalley"}]};class Tn{constructor(){$n(this,"data",{global:{stats:{exploration:0,perception:0,social:0,engineering:0},energyDecayRate:.1,maxEnergy:10,presistentActionProgress:[],loop:0,knowledge:[],completedActionHistory:[],retraceConfig:[]},run:{...Ee(jt)}})}static new(){let t=localStorage.getItem("save_0"),n=new Tn;return t&&(n.data=Cr(n.data,JSON.parse(t))),n}}const G={repeatable:!1},Ne={repeatable:!0},z={crossGeneration:!1},we={crossGeneration:!0},da={narcadia_workshop_move:{...z,...Ne,title:"Walk to Marco's Workshop",skill:"exploration",weight:7,flavourText:"Marco's Workshop — your go to place for wristwatch service",stopOnRepeat:!0,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteAny("narcadia_workshop_search")],postComplete:[A.moveSubLocation("Marco's Workshop")]},narcadia_macros_chat_repairs:{...z,...G,title:"Ask about borrowing tools",skill:"social",weight:5,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Marco's Workshop"),_.ifActionCompleteRun("narcadia_macros_greet")],postComplete:[A.addLog("Obviously, he wont rent out his instruments to anyone wandering by. He offered you to either pay for his services or scram, since he has work to do"),A.addKnowledge("narcadia_currency")]},narcadia_macros_pay_charger:{...z,...G,title:"Request charger upgrade",skill:"social",weight:10,...re.item("narcadia641_zenny",3),conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Marco's Workshop"),_.ifActionCompleteRun("narcadia_macros_chat_repairs")],postComplete:[A.removeItem("narcadia641_zenny",3),A.addLog("A bit confused with offered device, Marco was able to figure out how to add a battery slot there. 'Batteries are 1 coin a pop, by the way', he informed you")]},narcadia_macros_buy_battery:{...z,...Ne,title:"Buy a battery",skill:"social",weight:6,...re.all([re.item("narcadia641_zenny",1),re.itemNotCappedYet("small_battery")]),conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Marco's Workshop"),_.ifActionCompleteRun("narcadia_macros_pay_charger")],postComplete:[A.removeItem("narcadia641_zenny",1),A.addItem("small_battery",1)]},narcadia_macros_greet:{...z,...G,title:"Greet the owner",skill:"social",weight:3,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Marco's Workshop")],postComplete:[]},narcadia_macros_observe_work:{...z,...G,title:"Observe Marco's work",skill:"engineering",weight:10,flavourText:"Master is at work — fixing wristwatches. Maybe you'll notice something useful?",conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Marco's Workshop")],postComplete:[A.addLog("Marco is finished with repairing some old watch, replacing a battery, and goes back to reading a newspaper")]},narcadia_marco_undercharge:{...we,...G,title:"Ask about undercharged batteries",skill:"social",weight:20,flavourText:"The batteries are not fully charged, right?",...re.all([re.skillCheck("perception",2.5),re.skillCheck("engineering",1.5)]),conditions:[_.skillModifier("perception",1.5),_.skillModifier("engineering",1.2),_.inLocation("New Arcadia 641"),_.inSubLocation("Marco's Workshop"),_.ifActionCompleteRun("narcadia_macros_observe_work")],postComplete:[A.addLog("Surprised by your remark, Marco says that his charger is a bit broken, but he will new one from delivery a bit later"),A.addKnowledge("marco_needs_charger")]},narcadia_workshop_leave:{...z,...Ne,title:"Leave Marco's Workshop",skill:"exploration",weight:5,stopOnRepeat:!0,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Marco's Workshop")],postComplete:[A.moveSubLocation("Western main street")]},narcadia_workshop_search:{...we,...G,title:"Locate workshop",skill:"exploration",flavourText:"Maybe you can find some way to fix your device",weight:15,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteRun("intro_2"),_.ifActionCompleteAny("narcadia_seek_init"),_.ifActionCompleteRun("intro_confirm_tld")],postComplete:[]}},fa={na641_museum_search:{...we,...G,title:"Look for NAWS History Museum",skill:"exploration",weight:20,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteAny("narcadia_seek_init")],postComplete:[]},na641_museum_enter:{...z,...G,title:"Visit NAWS History Museum",skill:"exploration",stopOnRepeat:!0,weight:10,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteAny("na641_museum_search")],postComplete:[A.moveSubLocation("NAWS History Museum")]},na641_museum_leave:{...z,...G,title:"Leave for Western Main Street",skill:"exploration",stopOnRepeat:!0,weight:5,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum")],postComplete:[A.moveSubLocation("Western main street")]},na641_museum_ticket_info:{...we,...G,title:"Inspect ticket booth",skill:"perception",weight:20,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum")],postComplete:[A.addLog("Tickets are 5 zenny each"),A.addKnowledge("narcadia_currency")]},narcadia_museum_buy_ticket:{...z,...Ne,title:"Buy a ticket",skill:"social",weight:10,...re.all([re.item("narcadia641_zenny",5),re.itemNotCappedYet("naws_museum_ticket")]),conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum"),_.ifActionCompleteAny("na641_museum_ticket_info")],postComplete:[A.removeItem("narcadia641_zenny",5),A.addItem("naws_museum_ticket",1),A.addLog("You're now free to venture into museum. No refunds. No re-entry. No food or drink items")]},narcadia_museum_pass_gates:{...z,...Ne,title:"Pass gates",skill:"exploration",stopOnRepeat:!0,weight:10,...re.item("naws_museum_ticket",1),conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum"),_.ifActionCompleteAny("na641_museum_ticket_info")],postComplete:[A.removeItem("naws_museum_ticket",1),A.moveSubLocation("NAWS History Museum — Main Hall")]},narcadia_museum_leave_main_hall:{...z,...Ne,title:"Leave exposition",skill:"exploration",weight:10,stopOnRepeat:!0,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum — Main Hall")],postComplete:[A.moveSubLocation("NAWS History Museum")]},na641_museum_building_arcadia:{...we,...G,title:"Learn about how New Arcadia founding",skill:"engineering",weight:30,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum — Main Hall")],postComplete:[A.addLog("New Arcadia is a copy of city named Arcadia (sic!). Built over a desert, it provides its citizens with everything essential and relies on trading precious metals, mined from the desert"),A.addLog("Article and showcase items explain in great detail how this city was build and made sustainable. For curious youngsters, there's a mini arcade machine that lets you build your own cyber-new-arcadia"),A.addKnowledge("narcadia_founding"),A.addKnowledge("narcadia_resources")]},narcadia_museum_play_building:{...z,...Ne,title:"Play 'Build-An-Arcadia'",skill:"engineering",weight:15,...re.item("narcadia641_zenny",1),conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum — Main Hall"),_.ifActionCompleteAny("na641_museum_building_arcadia")],postComplete:[A.removeItem("narcadia641_zenny",1)]},narcadia_museum_blueprints:{...we,...G,postComplete:[A.addKnowledge("narcadia_west_main_street_acchikocchi"),A.addKnowledge("arcadia_layout")],title:"Examine city plan blueprints",skill:"engineering",weight:30,...re.skillCheck("perception",2),conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("NAWS History Museum — Main Hall"),_.ifActionCompleteAny("na641_museum_building_arcadia")]}},va={narcadia_delivery_move:{...z,...Ne,title:"Go to delivery center",skill:"exploration",weight:7,stopOnRepeat:!0,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteAny("narcadia_seek_init")],postComplete:[A.moveSubLocation("Rapid Delivery Service")]},narcadia_delivery_leave:{...z,...Ne,title:"Return to main street",skill:"exploration",weight:5,stopOnRepeat:!0,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Rapid Delivery Service")],postComplete:[A.moveSubLocation("Western main street")]},narcadia_delivery_promo:{...z,...G,title:"Get to know about best delivery service",skill:"social",flavourText:"Promoter standing outside if VERY insistent",weight:15,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Rapid Delivery Service")],postComplete:[A.addLog("After a lot of pointless blabbering, you got to know that Rapid is indeed fast. You can either look for work or make a delivery request here"),A.addKnowledge("narcadia_currency")]},narcadia_delivery_job:{...z,...G,title:"Ask about job openings",skill:"social",weight:10,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Rapid Delivery Service"),_.ifActionCompleteRun("narcadia_delivery_promo")],postComplete:[A.addLog("Payment is 2 Zeny per delivery, but you'll need to show that you have some knowledge about local area")]},narcadia_delivery_take_job:{...z,...G,title:"Agree to Rapid's deliveryman terms",skill:"social",weight:20,...re.hasKnowledge("narcadia_west_main_street_acchikocchi"),conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Rapid Delivery Service"),_.ifActionCompleteRun("narcadia_delivery_promo"),_.ifActionCompleteRun("narcadia_delivery_job")],postComplete:[A.addLog("You can take on delivery jobs from now on")]},narcadia_delivery_take_order:{...z,...G,title:"Take on a delivery order",skill:"social",weight:5,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Rapid Delivery Service"),_.ifActionCompleteRun("narcadia_delivery_take_job")],postComplete:[A.addFlag("narcadia_delivery_active_order"),A.addLog("Customer is somewhere around Western Main Street")]},narcadia_delivery_macros_charger:{...z,...G,title:"Take on Marco's charger delivery",skill:"social",weight:5,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Rapid Delivery Service"),_.ifActionCompleteRun("narcadia_delivery_take_job"),_.hasKnowledge("marco_needs_charger"),_.ifActionCompleteAny("narcadia_delivery_find_marco_order")],postComplete:[A.addLog("You've agreed to pick up Macro's order for delivery. Now to find it")]},narcadia_delivery_find_marco_order:{...we,...G,title:"Look for Marco's charger order",skill:"perception",weight:30,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Rapid Delivery Service"),_.ifActionCompleteRun("narcadia_delivery_take_job"),_.hasKnowledge("marco_needs_charger"),_.ifActionCompleteAny("narcadia_delivery_macros_charger")],postComplete:[A.addLog("Now all that's left is to deliver it to Marco at his workshop")]}},Z={intro_0:{title:"Look around",skill:"exploration",weight:5,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street alley")],repeatable:!1,crossGeneration:!1,postComplete:It("That is indeed some backalley of some unfamiliar town. You can hear some people wander around somewhere nearby")},intro_1:{title:"Check time leap device",skill:"perception",weight:3,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street alley"),_.ifActionCompleteRun("intro_0"),_.not(_.ifActionCompleteGlobal("intro_1"))],repeatable:!1,crossGeneration:!0,postComplete:It("Device on your wrist seems to be intact, but battery seems to rapidly degrade. Seems like you will shortly be back in your own time and (hopefully) place")},intro_confirm_tld:{title:"Check time leap device",skill:"perception",weight:3,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street alley"),_.ifActionCompleteRun("intro_0"),_.ifActionCompleteGlobal("intro_1")],repeatable:!1,crossGeneration:!1,postComplete:It("Device is still intact. Actually, it is in the precisely same state as the last time you've checked it. You are in a time loop!")},intro_2:{...G,...z,title:"Emerge from alley",skill:"exploration",weight:4,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street alley"),_.or([_.ifActionCompleteRun("intro_1"),_.ifActionCompleteRun("intro_confirm_tld")])],postComplete:[A.moveSubLocation("Western main street")]},narcadia_gather_info:{...we,...G,title:"Ask around",skill:"social",weight:10,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteRun("intro_2")],postComplete:[A.addLog("Asking around about where you are proved a surefire way to confuse people on the streets. You are on a streets of city called 'New Arcadia'"),A.addKnowledge("new_arcadia_town_name")]},narcadia_info_year:{...we,...G,title:"Ask for more info",skill:"social",weight:20,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteAny("narcadia_gather_info"),_.ifActionCompleteRun("intro_2")],postComplete:[It("The first few people ignored your weird questions, seemingly alarmed. Finally, old guy you pestered went on to say that 'In our 641th year we're still unable to get smoking bins around every corner and now we've got weirdos asking stupid things' when prompted about current year. He is clearly upset with people tossing butts around"),A.addKnowledge("new_arcadia_year")]},narcadia_seek_init:{...we,...G,title:"Examine shop signs",skill:"perception",weight:10,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.ifActionCompleteRun("intro_2")],postComplete:[A.addLog("There is advert about watchmaker workshop being located nearby"),A.addLog("Rapid Delivery! Delivery as fast as it is named. Terms and conditions apply"),A.addLog("Care for history? Visit the NAWS History Museum!")]},narcadia_moneymaking_seek:{...we,...G,title:"Look for a ways to earn money",skill:"exploration",weight:10,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.hasKnowledge("narcadia_currency")],postComplete:[A.addLog("Looking for loose coins under vending machines wouldnt be the worst idea in your situation")]},narcadia_loot_jidouhanbaiki:{...z,...Ne,title:"Rummage under vending machines",skill:"perception",...re.itemNotCappedYet("narcadia641_zenny"),weight:7,conditions:[_.inLocation("New Arcadia 641"),_.inSubLocation("Western main street"),_.hasKnowledge("narcadia_currency"),_.ifActionCompleteAny("narcadia_moneymaking_seek")],postComplete:[A.addItem("narcadia641_zenny",1)]},...da,...fa,...va};function _a(e,t){var r;let n=Object.entries(e.data.run.inventory).filter(([i,a])=>Ye[i].consumable).filter(([i,a])=>a.amount>=0).map(([i,a])=>i);for(const i of n){if(e.data.run.inventory[i].cooldown>0&&(e.data.run.inventory[i].cooldown=Math.max(0,e.data.run.inventory[i].cooldown-t)),((r=e.data.run.inventory[i])==null?void 0:r.amount)===0)return e;if(e.data.run.inventory[i].cooldown<=0){let a=Ye[i].consumeRequirement,s;if(Array.isArray(a)?s=a:s=[a],s.every(l=>l(e))){let l=Ye[i].onConsume,v;Array.isArray(l)?v=l:v=[l];for(const o of v)e=o(e);e.data.run.inventory[i].amount--,e.data.run.inventory[i].cooldown=5e3}}}return e}function pa(e){return t=>{console.log("saving!"),localStorage.setItem("save_0",JSON.stringify(_e(e).data))}}const ga=1.03,ma=1.07,ha=5,ya=1;window.__dev={sudoku:()=>{I.update(e=>(e.data.run.currentEnergy=-1,$r(),e))},state:()=>_e(I)};const Lr=1,Mn=20;let Er=Lr/Mn,at=1e3/Mn;const Pe={social:1,exploration:1,perception:1,engineering:1},O={skills:{run:{...Pe},global:{...Pe}},toLevel:{run:{baseline:{...Pe},next:{...Pe}},global:{baseline:{...Pe},next:{...Pe}}},modifiers:{global:{...Pe},total:{...Pe},run:{...Pe}}},Nr=Le(Mn),I=Le(Tn.new()),sn=Le(!1),Rr=Le(!1),On=Le(!1),Tr=Le(!1),Mr=Le(!1),Or=Le(!1),Pr=Le(!1),St=Le(null),Xe=e=>!e,Zn=()=>sn.update(Xe),Pn=()=>On.update(Xe),$r=()=>Pr.update(Xe),ba=()=>Mr.update(Xe),wa=()=>Or.update(Xe);setInterval(()=>Tr.update(Xe),10*1e3);yn();Tr.subscribe(pa(I));sn.subscribe(e=>{I.update(t=>{if(!t.data.run.action)return t;const n=t.data.run.action.id;let r=Z[n];if(t.data.run.actionProgress[n]||(t.data.run.actionProgress[n]={progress:0,complete:!1}),t.data.run.actionProgress[n].progress>=r.weight){t.data.global.completedActionHistory.includes(n)||t.data.global.completedActionHistory.push(n);let a=Array.isArray(r.postComplete)?r.postComplete:[r.postComplete];for(let s of a)s(t);if(!r.repeatable)t.data.run.action=null;else{if(r.grants)for(const s of r.grants)t.data.run.inventory[s]||(t.data.run.inventory[s]={amount:0,cooldown:0}),t.data.run.inventory[s].amount<t.data.run.inventoryCapacity&&(t.data.run.inventory[s].amount++,t.data.run.inventory[s].amount>=t.data.run.inventoryCapacity&&(t.data.run.action=null));t.data.run.actionProgress[n].progress=0,t.data.run.actionProgress[n].complete=!1,r.revealCondition!==void 0&&!r.revealCondition.every(s=>s(t))&&(t.data.run.action=null,t.data.run.actionProgress[n].progress=0),t.data.run.retraceIdx!==null&&(t.data.run.action=null)}r.stopOnRepeat&&(t.data.run.action=null,t.data.run.actionProgress[n].progress=0,t.data.run.actionProgress[n].complete=!1)}return t.data.run.actionProgress[n].progress===0&&$r(),t})});const xa=Rn([Nr,I],([e,t])=>{Er=Lr/e}),ka=Rn([sn],([e])=>Object.entries(Z).filter(([t,n])=>n.conditions.every(r=>r(_e(I)))).filter(Ir(_e(I))).map(([t,n])=>t),["intro_0"]),Aa=e=>Object.entries(Z).filter(([t,n])=>n.conditions.every(r=>r(e))).filter(Ir(e)).map(([t,n])=>t)??["intro_0"];let Dt;const Sa=Rn([Nr],([e])=>(Dt&&clearInterval(Dt),at=1e3/e,Dt=setInterval(()=>Rr.update(Xe),at),Dt),null);Rr.subscribe(e=>{I.update(t=>{var n,r;if(t.data.run.action){const i=t.data.run.action.id;if(t.data.run.timeSpent+=at,t=_a(t,at),t.data.run.energyDecayRate+=t.data.run.energyDecayRate*.03/at,t.data.run.currentEnergy-=t.data.run.energyDecayRate/at*ya,t.data.run.currentEnergy<=0)return St.set(t.data.run),t.data.run=ua(jt),t.data.global.loop=t.data.global.loop+1,Zn(),yn(),t;const a=Z[i].skill;let s=O.modifiers.total[a];const l=Er*s;t.data.run.actionProgress[i]?t.data.run.actionProgress[i].progress+=l:t.data.run.actionProgress[i]={progress:l,complete:!1};const v=Math.min(Math.max(l,0),Z[i].weight),o=Math.min(v,((n=t.data.run.actionProgress[i])==null?void 0:n.progress)??0,Z[i].weight);t.data.run.stats[a]+=o*1.3,t.data.global.stats[a]+=o,(t.data.run.stats[a]>=O.toLevel.run.baseline[a]+O.toLevel.run.next[a]||t.data.global.stats[a]>=O.toLevel.global.baseline[a]+O.toLevel.global.next[a])&&yn(),t.data.run.actionProgress[i].progress>=((r=Z[i])==null?void 0:r.weight)&&(Z[i].repeatable||(t.data.run.actionProgress[i].complete=!0),Z[i].crossGeneration&&t.data.global.presistentActionProgress.push(i),Zn())}else if(t.data.run.retraceIdx!==null&&_e(St)===null){console.log("retracing",t.data.run.retraceIdx),console.log(t.data.global.retraceConfig);const i=t.data.global.retraceConfig[t.data.run.retraceIdx]??null;if(!i)return console.log("no action to assign, ending retrace"),t.data.run.retraceIdx=null,t;t.data.run.action={id:i.id},t.data.run.retraceIdx=t.data.run.retraceIdx+1}return t})});Sa.subscribe(e=>null);xa.subscribe(e=>null);function Ir(e){return([t,n])=>(n.repeatable||!e.data.run.actionProgress[t]||!e.data.run.actionProgress[t].complete)&&(!n.crossGeneration||!e.data.global.presistentActionProgress.includes(t))}function yn(){let e=_e(I);for(const t of["exploration","perception","social","engineering"]){let n=jn(e.data.run.stats[t],ha),r=jn(e.data.global.stats[t],15);O.skills.run[t]=n.level,O.skills.global[t]=r.level,O.modifiers.run[t]=Un(n.level,ma),O.modifiers.global[t]=Un(r.level,ga),O.modifiers.total[t]=O.modifiers.run[t]*O.modifiers.global[t],O.toLevel.run.baseline[t]=n.expToCurrent,O.toLevel.run.next[t]=n.expToNext,O.toLevel.global.baseline[t]=r.expToCurrent,O.toLevel.global.next[t]=r.expToNext,I.update(i=>(i.data.run.bakery=O,i))}Pn()}var Ca=K("<span><i></i></span>");function mt(e,t){let n=Q(t,"icon",8);var r=Ca(),i=h(r);q(()=>on(i,`hn hn-${n()??""}`)),T(e,r)}var La=K("<div><i></i></div>");function Dr(e,t){Se(t,!1);let n=Q(t,"skill",8);const r={exploration:"search",perception:"eye",social:"message",engineering:"cog"}[n()];Oe();var i=La(),a=h(i);on(a,`hn hn-${r??""}`),T(e,i),Ce()}var Ea=K('<div class="text-xs col-span-12 text-slate-500 pl-2"> </div>'),Na=K('<div class="text-xs col-span-12 text-slate-500 pl-2"> </div>'),Ra=K('<div><div class="grid grid-cols-12 col-span-12 px-3 pt-1"><div class="col-span-1 text-center"><!></div> <div class="col-span-6"> </div> <div class="col-span-1 text-center cursor-pointer"><!></div> <div class="col-span-1 text-center cursor-pointer"><!></div> <div class="col-span-1 text-center cursor-pointer"><!></div> <div class="col-span-2 text-center"><!> <span class=" text-slate-500"> </span></div></div> <!> <div class="col-span-12 text-center"><!></div></div>');function Ta(e,t){Se(t,!1);const n=vt(),r=()=>ie(I,"$gameState",n),i=()=>ie(Pr,"$actionEndSignal",n),a=()=>ie(sn,"$actionsCheckSignal",n),s=()=>ie(On,"$bakeSignal",n),l=W(),v=W(),o=W(),u=W(),d=W(),c=W(),m=W();let p=Q(t,"action",8),g=Q(t,"id",8),b=Q(t,"running",8,!1),k=Q(t,"config",24,()=>({classes:[]}));function x(te,ne){var We;return((We=te.data.run.actionProgress[g()])==null?void 0:We.progress)??0}function S(te){return f(u)?p().grants?!(p().grants??[]).every(ne=>{var be;return(((be=te.data.run.inventory[ne])==null?void 0:be.amount)??0)>=te.data.run.inventoryCapacity}):!0:!1}function w(te){let ne=_e(I);return p().revealCondition?!!p().revealCondition.every(be=>be(ne)):!0}function y(te){return _e(I).data.global.completedActionHistory.includes(g())}const P=()=>{f(o)&&(yt(I,U(r).data.run.retraceIdx=null,U(r)),b()?yt(I,U(r).data.run.action=null,U(r)):yt(I,U(r).data.run.action={id:g()},U(r)))};Y(()=>(r(),i()),()=>{C(l,x(r(),i()!==null))}),Y(()=>(f(l),ve(p())),()=>{C(v,f(l)/p().weight*100)}),Y(()=>r(),()=>{C(o,S(r()))}),Y(()=>a(),()=>{C(u,w(a()!==null))}),Y(()=>a(),()=>{C(d,y(a()!==null))}),Y(()=>(s(),ve(p()),O),()=>{C(c,s()!==null&&p().weight/O.modifiers.total[p().skill]||p().weight)}),Y(()=>(ve(b()),f(o),f(u)),()=>{C(m,b()?"pause":f(o)&&f(u)?"play":"exclamation-triangle")}),Ge(),Oe();var L=Ra();const N=se(()=>`grid grid-cols-12 pixel-corners bg-slate-900 ${k().classes.join(" ")??""}`);var M=h(L),D=h(M),F=h(D);Dr(F,{get skill(){return p().skill}});var B=E(D,2),j=h(B),J=E(B,2),ge=h(J);mt(ge,{get icon(){return f(m)}});var me=E(J,2),he=h(me);mt(he,{icon:"login"});var le=E(me,2),ze=h(le);mt(ze,{icon:"lock-alt"});var _t=E(le,2),Ve=h(_t);mt(Ve,{icon:"clock"});var ee=E(Ve,2),de=h(ee);q(()=>V(de,`${f(c).toFixed(2)??""}s`));var ye=E(M,2);xe(ye,()=>!f(u),te=>{var ne=xt(),be=Ke(ne);Ue(be,1,()=>p().revealConditionExplained??[],kt,(We,Mt)=>{var Ot=Ea(),Wr=h(Ot);q(()=>V(Wr,f(Mt))),T(We,Ot)}),T(te,ne)},te=>{var ne=xt(),be=Ke(ne);xe(be,()=>p().flavourText,We=>{var Mt=Na(),Ot=h(Mt);q(()=>V(Ot,p().flavourText)),T(We,Mt)},null,!0),T(te,ne)});var Ie=E(ye,2),De=h(Ie);xr(De,i,te=>{var ne=se(()=>f(u)?f(v):0);At(te,{get percent(){return f(ne)}})}),q(()=>{on(L,f(N)),it(B,"text-slate-500",!f(u)),V(j,f(u)||f(d)?p().title:"???")}),ct("click",J,P),T(e,L),Ce()}var Ma=K('<div> </div> <div class="grid grid-cols-2"><div class="text-slate-500 text-xs"> </div> <div class="text-slate-500 text-xs text-right"> </div> <div class="col-span-2"><!></div></div>',1),Oa=K('<div class="pixel-corners p-2 bg-slate-900"></div>'),Pa=K('<div class="grid grid-cols-12 gap-2"><div class="col-span-8"></div> <div class="col-span-4"><!></div></div>');function $a(e,t){Se(t,!1);const n=vt(),r=()=>ie(ka,"$displayableActions",n),i=()=>ie(I,"$gameState",n),a=W(),s=W();Y(()=>(r(),Z),()=>{C(a,r().map(d=>(Z[d]&&{action:Z[d],id:d})??null).filter(Boolean))}),Y(()=>i(),()=>{C(s,Object.entries(i().data.run.inventory))}),Ge(),Oe();var l=Pa(),v=h(l);Ue(v,5,()=>f(a),({action:d,id:c})=>c,(d,c)=>{let m=()=>f(c).action,p=()=>f(c).id;var g=se(()=>{var b;return((b=i().data.run.action)==null?void 0:b.id)==p()});Ta(d,{get action(){return m()},get id(){return p()},get running(){return f(g)},config:{classes:["col-span-12 mb-2"]}})});var o=E(v,2),u=h(o);xe(u,()=>Object.entries(i().data.run.inventory).length>0,d=>{var c=Oa();Ue(c,5,()=>f(s),([m,p])=>m,(m,p)=>{let g=()=>f(p)[0],b=()=>f(p)[1];var k=Ma(),x=Ke(k),S=h(x),w=E(x,2),y=h(w),P=h(y),L=E(y,2),N=h(L);q(()=>V(N,`${(b().cooldown/1e3).toFixed(2)??""}s`));var M=E(L,2),D=h(M),F=se(()=>Math.floor(b().cooldown/5e3*100));At(D,{get percent(){return f(F)}}),q(()=>{var B;V(S,`${Ye[g()].name??""}
            ${((B=i().data.run.inventory[g()])==null?void 0:B.amount)??0??""}/${i().data.run.inventoryCapacity??""}`),V(P,Ye[g()].description)}),T(m,k)}),T(d,c)}),T(e,l),Ce()}const Ia=e=>e;function Ut(e,{delay:t=0,duration:n=400,easing:r=Ia}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}var Da=K('<div class="absolute z-10 backdrop-blur-sm bg-opacity-50 left-0 top-0 w-full h-full pointer-events-none"></div>'),Wa=K('<div class="col-span-6"><!></div>'),Fa=K('<div class="absolute bg-slate-900 z-20 text-left mt-2 p-2 border-2 border-slate-500"><div>Run</div> <div class="text-slate-400 text-sm"> </div> <div class="text-slate-400 text-sm"> </div> <div class="mt-2">Time compression</div> <div class="text-slate-400 text-sm"> </div> <div class="text-slate-400 text-sm"> </div></div>'),qa=K('<!> <div class="relative w-full"><div class="pixel-corners bg-slate-900 grid grid-cols-6 w-full relative"><div class="col-span-6 grid grid-cols-6 p-2"><div class="col-span-1 text-center"><!></div> <div class="col-span-2 text-left"> </div> <div class="col-span-3 text-right"> </div></div> <!> <div class="col-span-6"><!></div></div></div> <!>',1);function Ha(e,t){Se(t,!1);const n=vt(),r=()=>ie(On,"$bakeSignal",n),i=()=>ie(I,"$gameState",n),a=W(),s=W(),l=W(),v=W();let o=Q(t,"skill",8),u=W(O.modifiers.total[o()].toFixed(2)),d=W(!1),c=W();Y(()=>(r(),ve(o())),()=>{r()!=null&&C(u,O.modifiers.total[o()].toFixed(2))}),Y(()=>(i(),ve(o()),O),()=>{C(a,i().data.run.stats[o()]-O.toLevel.run.baseline[o()])}),Y(()=>(f(a),ve(o())),()=>{C(s,f(a)/O.toLevel.run.next[o()]*100)}),Y(()=>(i(),ve(o()),O),()=>{C(l,i().data.global.stats[o()]-O.toLevel.global.baseline[o()])}),Y(()=>(f(l),ve(o())),()=>{C(v,f(l)/O.toLevel.global.next[o()]*100)}),Ge(),Oe();var m=qa(),p=Ke(m);xe(p,()=>f(d),B=>{var j=Da();Yt(1,j,()=>Ut,()=>({duration:250})),Yt(2,j,()=>Ut,()=>({duration:20})),T(B,j)});var g=E(p,2),b=h(g),k=h(b),x=h(k),S=h(x);Dr(S,{get skill(){return o()}});var w=E(x,2),y=h(w);q(()=>V(y,o().slice(0,1).toUpperCase()+o().slice(1)));var P=E(w,2),L=h(P),N=E(k,2);xr(N,r,B=>{var j=Wa(),J=h(j);At(J,{get percent(){return f(s)}}),T(B,j)});var M=E(N,2),D=h(M);At(D,{get percent(){return f(v)}}),mn(g,B=>C(c,B),()=>f(c));var F=E(g,2);xe(F,()=>f(d),B=>{var j=Fa();const J=se(()=>`width: ${f(c).getBoundingClientRect().width??""}px`);var ge=E(h(j),2),me=h(ge);q(()=>V(me,`x${O.modifiers.run[o()].toFixed(2)??""} modifier from current run`));var he=E(ge,2);const le=se(()=>f(a).toFixed(2)??""),ze=se(()=>O.toLevel.run.next[o()].toFixed(2)??"");var _t=h(he);q(()=>V(_t,`${f(le)} / ${f(ze)} exp to next`));var Ve=E(he,4),ee=h(Ve);q(()=>V(ee,`x${O.modifiers.global[o()].toFixed(2)??""} modifier from time compression`));var de=E(Ve,2);const ye=se(()=>f(l).toFixed(2)??""),Ie=se(()=>O.toLevel.global.next[o()].toFixed(2)??"");var De=h(de);q(()=>V(De,`${f(ye)} / ${f(Ie)} exp to next`)),q(()=>kr(j,"style",f(J))),T(B,j)}),q(()=>{it(g,"z-20",f(d)),V(L,`x${f(u)??""}`)}),ct("mouseenter",g,()=>C(d,!0)),ct("mouseleave",g,()=>C(d,!1)),T(e,m),Ce()}var Ba=K("<button><!></button>");function pt(e,t){Se(t,!1);const n=W(),r=W();let i=Q(t,"testId",8,null);const a={classMixins:[],disabled:!1,loading:!1};let s=Q(t,"config",8,a);const l=u=>u?["bg-slate-900","transition-none","hover:bg-slate-900","cursor-not-allowed"]:[];Y(()=>ve(s()),()=>{C(n,{...a,...s()})}),Y(()=>f(n),()=>{C(r,[...f(n).classMixins,...l(f(n).disabled||f(n).loading)].join(" "))}),Ge(),Oe();var v=Ba(),o=h(v);xe(o,()=>f(n).loading,u=>{var d=nt("...");T(u,d)},u=>{var d=xt(),c=Ke(d);Vi(c,t,"default",{}),T(u,d)}),q(()=>{on(v,`px-4 py-2 border-4 rounded-md hover:bg-slate-700 transition-all pixel-corners bg-slate-600 border-slate-700 ${f(r)??""}`),kr(v,"data-testid",i())}),ct("click",v,function(u){Sr.call(this,t,u)}),T(e,v),Ce()}var Ka=K('<div class="pixel-corners bg-slate-900 grid grid-cols-12 px-2 py-1 hover:bg-slate-600 transition-all cursor-pointer"><div class="col-span-12 text-slate-400 text-xs"> </div> <div class="col-span-6"></div> <div class="col-span-6 text-sm text-slate-500"></div></div>');function Ga(e,t){Se(t,!1);const n=vt(),r=()=>ie(I,"$gameState",n),i=W();let a=Q(t,"action",8);Q(t,"id",8),Q(t,"retracing_id",8),Y(()=>(ve(a()),r()),()=>{C(i,typeof a().title=="string"?a().title:a().title(r()))}),Ge(),Oe();var s=Ka(),l=h(s),v=h(l);q(()=>V(v,f(i))),ct("click",s,function(o){Sr.call(this,t,o)}),T(e,s),Ce()}var za=K('<div class="py-2 px-3"><div class="grid grid-cols-12"><div class="col-span-12 text-lg text-center"> </div> <div class="col-span-12 text-center"><!> <!></div></div></div>'),Va=K('<div class="col-span-1"><div class="text-center cursor-pointer"><i class="hn hn-trash-alt"></i></div></div>'),Ya=K('<div class="grid grid-cols-5 pixel-corners bg-slate-900 mb-2 p-1 border-b border-slate-700 text-sm"><div class="col-span-4"> </div> <!></div>'),ja=K('<div class="col-span-2"><!></div>'),Ua=K('<div class="bg-slate-500 w-full text-center text-slate-900 py-2">Retracing</div> <div class="flex-1 grid grid-cols-12 min-h-0"><div class="col-span-3 border-r-slate-500 border-r-2 overflow-y-auto"><div class="px-2 py-1 text-center bg-slate-500 text-slate-900 border-t-2 border-t-slate-900">Timeline</div> <div class="pt-2 px-2"></div></div> <div class="col-span-9 p-2 grid grid-cols-12 grid-rows-12 space-x-1 overflow-auto"></div></div> <div class="grid grid-cols-12 w-full text-center border-t-slate-500 border-t-2"><!> <!> <!></div>',1),Za=K('<div class="w-full h-full absolute p-10 z-10 backdrop-blur-lg"><div class="w-full h-full pixel-corners bg-slate-900 relative flex flex-col"><!></div></div>');function Ja(e,t){Se(t,!1);const n=vt(),r=()=>ie(I,"$gameState",n),i=()=>ie(St,"$endRun",n),a=W();let s=W(!1),l=r().data.global.completedActionHistory,v=W([]),o=W(Ee(_e(I)));Ht(o,f(o).data.run=Ee(jt));function u(g){const b=f(o).data.run,k=Z[g];if(b.actionProgress[g]?(b.actionProgress[g].complete=!0,b.actionProgress[g].progress=k.weight):b.actionProgress[g]={complete:!0,progress:k.weight},k.stopOnRepeat&&(b.actionProgress[g].complete=!1,b.actionProgress[g].progress=0),k.postComplete){const x=Array.isArray(k.postComplete)?k.postComplete:[k.postComplete];for(const S of x)C(o,Ee(S(f(o))))}}function d(g=null){C(o,Ee(_e(I))),Ht(o,f(o).data.run=Ee(jt)),g&&f(v).push({id:g});for(const b of f(v))u(b.id);C(v,f(v)),C(o,f(o)),console.log("Rebuild complete. Current Head:",f(o).data.run)}Y(()=>(f(o),Z),()=>{C(a,Aa(f(o)).filter(g=>{let k=(Z[g].conditions??[S=>!0]).every(S=>S(f(o))),x=(Z[g].revealCondition??[S=>!0]).every(S=>S(f(o)));return l.includes(g)&&k&&x}))}),Ge(),Oe();var c=Za(),m=h(c),p=h(m);xe(p,()=>!f(s),g=>{var b=za(),k=h(b),x=h(k),S=h(x);q(()=>V(S,`Energy ran out after ${hn(i().timeSpent)??""}`));var w=E(x,2),y=h(w);xe(y,()=>r().data.global.loop>2,L=>{pt(L,{config:{classMixins:["mx-2"]},$$events:{click:()=>{C(s,!0),C(v,Ee(_e(I).data.global.retraceConfig)),d(null)}},children:(N,M)=>{var D=nt("Setup retracing");T(N,D)},$$slots:{default:!0}})});var P=E(y,2);pt(P,{config:{classMixins:["mx-2"]},$$events:{click:()=>ea(St,null)},children:(L,N)=>{var M=nt("Unwind time");T(L,M)},$$slots:{default:!0}}),T(g,b)},g=>{var b=Ua(),k=E(Ke(b),2),x=h(k),S=E(h(x),2);Ue(S,5,()=>[...[...f(v)].entries()].reverse(),kt,(M,D)=>{let F=()=>f(D)[0],B=()=>f(D)[1];var j=Ya(),J=h(j),ge=h(J),me=E(J,2);xe(me,()=>F()===f(v).length-1,he=>{var le=Va(),ze=h(le);ct("click",ze,()=>{f(v).splice(F(),1),C(v,f(v)),d(null)}),T(he,le)}),q(()=>V(ge,Z[B().id].title)),T(M,j)});var w=E(x,2);Ue(w,5,()=>f(a),kt,(M,D)=>{var F=ja(),B=h(F);Ga(B,{get action(){return Z[f(D)]},get id(){return f(D)},get retracing_id(){return f(D)},$$events:{click:()=>{d(f(D))}}}),T(M,F)});var y=E(k,2),P=h(y);pt(P,{config:{classMixins:["mx-2 my-2"]},$$events:{click:()=>{yt(I,U(r).data.global.retraceConfig=f(v).map(M=>({id:M.id})),U(r))}},children:(M,D)=>{var F=nt("save");T(M,F)},$$slots:{default:!0}});var L=E(P,2);pt(L,{config:{classMixins:["mx-2 my-2"]},$$events:{click:()=>{yt(I,U(r).data.global.retraceConfig=[],U(r)),C(v,[]),d(null)}},children:(M,D)=>{var F=nt("clear");T(M,F)},$$slots:{default:!0}});var N=E(L,2);pt(N,{config:{classMixins:["mx-2 my-2"]},$$events:{click:()=>C(s,!1)},children:(M,D)=>{var F=nt("exit");T(M,F)},$$slots:{default:!0}}),T(g,b)}),Yt(1,c,()=>Ut),Yt(2,c,()=>Ut,()=>({duration:100})),T(e,c),Ce()}var Xa=K('<div class="transition-all duration-500"><!></div>'),Qa=K('<div class="border-b-2 mb-2 pixel-corners bg-slate-900 px-3 text-sm"><div class="text-right text-slate-500"> </div> <div> </div></div>'),eo=K('<main class="h-screen svelte-66lomk"><!> <div class="grid h-full grid-cols-12 grid-rows-[auto_1fr_auto]"><div class="col-span-12 grid grid-cols-12 text-center p-2"><div class="col-span-12 pixel-corners bg-slate-900"><div> </div> <div><!> <span> </span> <span class="text-sm text-slate-400"> </span></div> <div><!></div></div> <div class="col-span-12 grid grid-cols-4 space-x-1 mt-2"></div> <div class="col-span-12 grid grid-cols-12 space-x-1 mt-2 bg-slate-900 pixel-corners text-center transition-all"><div class="col-span-12"> </div></div></div> <div class="col-span-12 grid grid-cols-12 border-b-2 border-b-slate-400 overflow-hidden flex-col"><div class="col-span-9 overflow-hidden px-2"><!></div> <div class="col-span-3 h-full overflow-hidden flex flex-col px-2"><div class="overflow-y-auto flex-1"></div></div></div> <div class="col-span-12 grid grid-cols-12">btm</div></div></main>');function to(e,t){Se(t,!1);const n=vt(),r=()=>ie(Mr,"$knowledgeSignal",n),i=()=>ie(Or,"$subLocationSignal",n),a=()=>ie(St,"$endRun",n),s=()=>ie(I,"$gameState",n),l=["exploration","perception","social","engineering"];function v(ee,de){return de.data.global.stats[ee]>0||de.data.run.stats[ee]>0}let o=W({text:null,show:!1});function u(ee){C(o,ca[ee.data.run.location](ee))}Y(()=>(r(),i(),I),()=>{(r()!==null||i()!==null)&&u(_e(I))}),Ge(),Oe();var d=eo(),c=h(d);xe(c,a,ee=>{Ja(ee,{})});var m=E(c,2),p=h(m),g=h(p),b=h(g),k=h(b);q(()=>V(k,hn(s().data.run.timeSpent)));var x=E(b,2),S=h(x);mt(S,{icon:"bolt"});var w=E(S,2);const y=se(()=>s().data.run.currentEnergy.toFixed(2)??""),P=se(()=>s().data.run.maxEnergy.toFixed(2)??"");var L=h(w);q(()=>V(L,`${f(y)} / ${f(P)}`));var N=E(w,2),M=h(N);q(()=>V(M,`(-${s().data.run.energyDecayRate.toFixed(2)??""}/s)`));var D=E(x,2),F=h(D),B=se(()=>s().data.run.currentEnergy/s().data.run.maxEnergy*100);At(F,{get percent(){return f(B)}});var j=E(g,2);Ue(j,5,()=>l,kt,(ee,de)=>{var ye=Xa();const Ie=se(()=>!v(f(de),s()));var De=h(ye);Ha(De,{get skill(){return f(de)}}),q(()=>{it(ye,"invisible",f(Ie)),it(ye,"opacity-0",f(Ie))}),T(ee,ye)});var J=E(j,2),ge=h(J),me=h(ge),he=E(p,2),le=h(he),ze=h(le);aa(ze,{routingSettings:{actions:$a},get currentRoute(){return s().data.run.mainViewRoute}});var _t=E(le,2),Ve=h(_t);Ue(Ve,5,()=>s().data.run.logEntries.reverse(),kt,(ee,de)=>{let ye=()=>f(de).ts,Ie=()=>f(de).text;var De=Qa(),te=h(De),ne=h(te);q(()=>V(ne,hn(ye())));var be=E(te,2),We=h(be);q(()=>V(We,Ie())),T(ee,De)}),q(()=>{it(J,"invisible",!f(o).show),it(J,"opacity-0",!f(o).show),V(me,f(o).text??"NO LOCATION DATA")}),T(e,d),Ce()}window.__debug={};qi(to,{target:document.getElementById("app")});
